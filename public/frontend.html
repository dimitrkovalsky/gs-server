<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251"/>
    <title>Frontend</title>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/communication.js"></script>
    <script src="js/requests.js"></script>
</head>

<body>
<h1>Global Strategy </h1>

    <div id = "connection_status" class="status-fail">Not connected </div>
    <div id = "auth_status" class="status-fail">Not authenticated </div>

<form name="Authenticate">
    <input type="text" name="id" value="100500"/>
    <input type="submit" class="btn" value="Authenticate"/>
</form>

<div id="subscribe"></div>


<script>


    document.forms.Authenticate.onsubmit = function () {
        var request = new RequestObject();

        request.setRequestType(RT_AUTHENTICATE);
        request.setRequestData({googleId: this.id.value});

        var jsonRequest = toJson(request);

        showMessage("send : " + jsonRequest);
        socket.send(jsonRequest);
        return false;
    };
    socket.onmessage = function (event) {
        var incomingMessage = event.data;
        showMessage(incomingMessage);
    };

    function showMessage(message) {
        var messageElem = document.createElement('div');
        messageElem.appendChild(document.createTextNode(message));
        document.getElementById('subscribe').appendChild(messageElem);
    }


</script>
</body>
</html>